const APP={version:"5.5.2",mode:"/delta-dual"===window.location.pathname||"#test"===window.location.hash?2:1,resize:0,machineId:getMachineId(),skinAuth:"Vanis s5fKDiOD5hSR-DVZGs5u",statsHaveChanged:!1,selected:{badge:!1,hat:!1,aura:!1},blacklist:[".","1","2","3","4","5","6","7","8","9","0","k","K","m","M","A1","A2","A3","A4","A5","B1","B2","B3","B4","B5","C1","C2","C3","C4","C5","D1","D2","D3","D4","D5","E1","E2","E3","E4","E5","Unnamed","Long Name","Bad Words",""," ","  ","   ","    ","     ","      ","       ","        ","         ","          ","           ","            ","             ","              ","               ","                "]},ATTRS={libraries:getAllLibrary(),selectors:getAllSelectors(),images:getAllImages(),colors:getAllColors(),errors:getAllErrors(),titles:getAllTitle()},DB={database:void 0,references:{}},USER={credentials:{},statistics:{},configurations:getAllConfigurations()},LISTS={users:{},colors:{},badges:void 0,hats:void 0,configurations:void 0,leaderboard:void 0},SKINS={all:[],me:[],fav:[]};function onDocumentReady(){pageConfiguration(),onAttributesReady().then()}async function onAttributesReady(){try{await loadScript(ATTRS.libraries.firebaseApp),await Promise.all([loadScript(ATTRS.libraries.jquery),loadScript(ATTRS.libraries.firebaseAuth),loadScript(ATTRS.libraries.firebaseDatabase),loadScript(ATTRS.libraries.sortable)]),await onScriptsReady()}catch(e){const t=parseInt(localStorage.getItem("promiseError")||0)||0;t<2?(localStorage.setItem("promiseError",(t+1).toString()),window.location.reload()):displayError(ATTRS.errors.title+"Promise issue, 3 attempts failed."+ATTRS.errors.content)}}async function onScriptsReady(){firebaseConfiguration((()=>{firebaseAccount((()=>{firebaseComponents((()=>{removeAds(),createComponents(),listenerComponents(),mutationComponents(),drawStyle()}))}))}))}function firebaseConfiguration(e){const t={apiKey:"AIzaSyCc_St6TMlGM6fmeYre_gHjCXYriPc3wtM",authDomain:"delta-client.firebaseapp.com",projectId:"delta-client",storageBucket:"delta-client.appspot.com",messagingSenderId:"68762024822",appId:"1:68762024822:web:c4f0497b6b914ac9ce9857",measurementId:"G-G5YSMYFCXJ",databaseURL:"https://delta-client-default-rtdb.europe-west1.firebasedatabase.app"};"undefined"!=typeof firebase?(firebase.initializeApp(t),e()):displayError(ATTRS.errors.title+"Database connection failed"+ATTRS.errors.content)}function firebaseSignOut(){firebase.auth().currentUser&&firebase.auth().signOut().then((()=>{window.location.reload()})).catch((()=>{displayError(ERROR.title+"Signout failed"+ERROR.content)}))}function firebaseAccount(e){firebase.auth().onAuthStateChanged((function(t){t?(getLocalValues(t),getDatabase(),e()):initRegisterForm((()=>{}))}))}function firebaseComponents(e){firebase.apps.length>0&&(fetchUserData(),e())}function initRegisterForm(){initRegisterPage(),initAnimationsPage(),initAnimationsForm(),initForm(),setTimeout((()=>{removeCookie()}),1e3)}function initRegisterPage(){document.head.innerHTML+="\n        <style>\n            #login-form>input::placeholder {\n                color:#956dff6e;\n            }\n        </style>\n    ",document.body.innerHTML+='\n        <div class="signIn" style="background: linear-gradient(45deg,#010004,#130535);position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index: 9999;display: flex;justify-content: center;align-items: center;flex-direction: column;">\n            <h2 id="delta-text" style="position: absolute;top: 90px;font-size: 45px;background: linear-gradient(45deg, #5718c2, #8036ff, #aa78ff, #cbadff, #aa78ff, #8036ff, #5718c2);background-size: 200% auto;animation: slide 2s infinite;-webkit-background-clip: text;background-clip: text;color: transparent;">Delta account</h2>\n           <h4 id="delta-text" style="position: absolute;top: 180px;color: #b79cff;font-size: 25px;opacity: 0.8;text-align: center">Password login is required for security<br>Your data is safe and secured <i class="fas fa-lock"></i><br>Your password must be at least 7 characters long <i class="fas fa-key"></i></h4>\n           <form id="login-form" style="position: absolute; display: flex; flex-direction: column; gap: 10px; justify-content: center; align-items: center; margin-top: 270px">\n              <input type="email" id="email-input" placeholder="Email" style="background: #54379f4d;border:solid 1px #956dff6e;color: #ffffff;border-radius: 13px;padding: 8px;width: 350px;height: 35px;font-size: 18px;text-align: center;">\n              <input type="password" id="password-input" placeholder="Password" style="background: #54379f4d;border:solid 1px #956dff6e;color: #dadada;border-radius: 13px;padding: 8px;width: 350px;height: 35px;font-size: 18px;text-align: center;">\n              <div id="submit-account" style="background: #b69cff;color: #241931;border-radius: 13px;padding: 8px;width: 350px;height: 35px;transform: scale(1);transition: all 0.3s ease 0s;">\n                 <p id="submit-text" style="font-size: 18px; text-align: center; padding: 6px;">Login/create (automatic)</p>\n              </div>\n           </form>\n        </div>\n    '}function initAnimationsForm(){const e=$(ATTRS.selectors.submitButton),t={transform:"scale(0.9)",transition:"all 0.3s"},s={transform:"scale(1)",transition:"all 0.3s"},n=()=>{$(ATTRS.selectors.submitText).text("Login/create (automatic)"),e.css("background-color","#b69cff")};e.hover((()=>e.css(t)),(()=>e.css(s))),$(ATTRS.selectors.emailInput).on("input",n),$(ATTRS.selectors.passwordInput).on("input",n)}function initForm(){const e=$(ATTRS.selectors.submitButton),t=$(ATTRS.selectors.submitText),s=$(ATTRS.selectors.emailInput),n=$(ATTRS.selectors.passwordInput),a=s=>{t.text(s),e.css("background-color","#ee3652")},o=()=>{USER.credentials=firebase.auth().currentUser,window.location.reload()},i=e=>{"auth/email-already-in-use"===e.code?firebase.auth().signInWithEmailAndPassword(s.val(),n.val()).then(o).catch((()=>a("Incorrect password..."))):a("An error as occurred...")};e.on("click",(function(){n.val().length>6?(t.text("Loading..."),e.css("background-color","#584879"),firebase.auth().createUserWithEmailAndPassword(s.val(),n.val()).then(o).catch(i)):a("Password too short...")}))}function initAnimationsPage(){const e=document.createElement("style");e.textContent="\n        @keyframes slide { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }\n    ",document.head.appendChild(e)}function pushUserInfos(){const e=processSkinInput($(ATTRS.selectors.skinUrl)?$(ATTRS.selectors.skinUrl).val():null);pushDatabase(DB.references.meUser,{u:USER.credentials.uid,st:(new Date).getTime(),n:USER.configurations.n,c:USER.configurations.c,s:"vanis"===e.type?e.id:e.url,se:USER.server,l:$(ATTRS.selectors.level).length>0&&parseInt($(ATTRS.selectors.level).text().trim().match(/\d+/)[0])||0,a:"checked"===USER.configurations.a?1:0,m:USER.mode})}function pushUserSpecificData(e,t){const s=processSkinInput($(ATTRS.selectors.skinUrl)?$(ATTRS.selectors.skinUrl).val():null);let n={};"status"===t&&(n.st=(new Date).getTime()),"time"===t&&(n.t=(new Date).getTime()),"name"===t&&(n.n=USER.configurations.n),"skin"===t&&(n.s="vanis"===s.type?s.id:s.url),"color"===t&&(n.c=USER.configurations.c),"server"===t&&(n.se=USER.server),"spec"===t&&(n.se="Spectator on "+USER.server),"pid"===t&&(n.p=USER.pid),pushDatabase(e,n)}function pushUserConfigurations(){"checked"===USER.configurations.as&&pushDatabase(DB.references.meConfigItem,{skins:USER.configurations.skins,hotkeys:USER.configurations.hotkeys,b:USER.configurations.b,r:USER.configurations.r,c:USER.configurations.c,n:USER.configurations.n,m:USER.configurations.m,d:USER.configurations.d,cc:USER.configurations.cc})}function pushUserStatisticsDb(){pushDatabase(DB.references.meStat,USER.statistics),localStorage.setItem("sT","0"),localStorage.setItem("sM","0"),localStorage.setItem("sK","0"),localStorage.setItem("sG","0"),APP.statsHaveChanged=!0}function pushUserStatisticsLocally(){const e=parseInt(getLocalStorageItem("sT","0"))+($(ATTRS.selectors.statTime).length?getConvertedTimeToSeconds($(ATTRS.selectors.statTime).text().split(": ")[1]):0),t=parseInt(getLocalStorageItem("sM","0"))+($(ATTRS.selectors.statScore).length?getConvertedStringToNumber($(ATTRS.selectors.statScore).text().split(": ")[1]):0),s=parseInt(getLocalStorageItem("sK","0"))+($(ATTRS.selectors.statKills).length?parseInt($(ATTRS.selectors.statKills).text().split(": ")[1],10):0),n=parseInt(getLocalStorageItem("sG","0"))+1;USER.statistics.sT+=e,USER.statistics.sM+=t,USER.statistics.sK+=s,USER.statistics.sG+=1,localStorage.setItem("sT",e.toString()),localStorage.setItem("sM",t.toString()),localStorage.setItem("sK",s.toString()),localStorage.setItem("sG",n.toString()),APP.statsHaveChanged=!1}function pushUserBadge(e){pushUserPerk(e,"badge",DB.references.meUserBadge,LISTS.badges)}function pushUserHat(e){pushUserPerk(e,"hat",DB.references.meUserHat,LISTS.hats)}function pushUserPerk(e,t,s,n){const a=JSONSafeParser(decodeURIComponent(e));if(Object.keys(a).length>0){a.o&&delete a.o,a.e&&delete a.e,APP.selected[t]===a.i&&(a.u=null),Object.values(n).forEach((e=>{$(`.${t}${e.i}`).removeClass(`${t}Selected`).addClass(`${t}NotSelected`)}));const e=APP.selected[t]===a.i?"":"Not",o=APP.selected[t]===a.i?"Not":"";$(`.${t}${a.i}`).removeClass(`${t}${e}Selected`).addClass(`${t}${o}Selected`),pushDatabase(s,a),APP.selected[t]===a.i?APP.selected[t]=!1:APP.selected[t]=a.i}}function fetchUserStatisticsDb(){DB.references.meStat.once("value",(e=>{if(e.exists()){const t=e.val();USER.statistics={sT:(t.sT||0)+parseInt(getLocalStorageItem("sT","0")),sM:(t.sM||0)+parseInt(getLocalStorageItem("sM","0")),sK:(t.sK||0)+parseInt(getLocalStorageItem("sK","0")),sG:(t.sG||0)+parseInt(getLocalStorageItem("sG","0")),u:USER.credentials.uid}}else USER.statistics={sT:0,sM:0,sK:0,sG:1,u:USER.credentials.uid};pushUserStatisticsDb()}))}function fetchUsersOnce(e){DB.references.user.orderByChild("st").startAt((new Date).getTime()-6912e5).once("value",(t=>{if(t.exists()){const s=t.val();LISTS.users=s,Object.keys(s).forEach((e=>{fetchColorsToUsers(s[e],-1)})),fetchNewValues(),e()}}))}function fetchUserChanged(){DB.references.user.on("child_changed",(e=>{if(e.exists()){const t=e.val();t&&t.u&&(fetchColorsToUsers(t,LISTS.users[t.u]),LISTS.users[t.u]=t,fetchNewValues())}}))}function fetchColorsToUsers(e,t){if(!e.n||!e.u)return;const s=processSkinInput(e.s);function n(e,t){return!(!e||!t)&&e!==t}(-1===t||n(e.n,t.n)||n(e.c,t.c)||e.ba&&t.ba&&n(e.ba.u,t.ba.u)||e.h&&t.h&&n(e.h.u,t.h.u)||"imgbb"===s.type&&n(e.skin,t.skin)||n(e.p,t.p))&&(LISTS.colors[e.n.trim()]={u:e.u,p:e.p,c:e.c?e.c:null,h:e.h?e.h:null,ba:e.ba?e.ba:null,s:"imgbb"===s.type?s.url:null})}function fetchNewValues(){const e=LISTS.users[USER.credentials.uid];e.b&&displayError(`You've been banned from Delta by Fohz. Reason: ${e.b}`),1===APP.mode&&"checked"===USER.configurations.cc&&changeCellColor(),2===APP.mode&&window.dispatchEvent(new CustomEvent("colorChanged"))}function fetchItem(e,t){return e?Object.entries(e).map((([e,s])=>t(s,e))).join(""):""}function pageConfiguration(){let e=document.querySelector(ATTRS.selectors.link)||document.createElement("link"),t=document.querySelector(".far.fa-keyboard");t&&(t.classList.remove("far"),t.classList.add("fas")),e.type="image/x-icon",e.rel="shortcut icon",e.href=ATTRS.images.deltaLogo,document.getElementsByTagName(ATTRS.selectors.head)[0].appendChild(e),document.title=1===APP.mode?"Delta - Single":"Delta - Dual"}function loadScript(e){return new Promise(((t,s)=>{const n=document.createElement("script");n.src=e,n.onload=t,n.onerror=s,document.head.appendChild(n)}))}function removeAds(){$(ATTRS.selectors.ad).css("display","none")}function removeCookie(){setTimeout((function(){$(ATTRS.selectors.cmp)&&($(ATTRS.selectors.cmpButton).click(),$(ATTRS.selectors.cmp).remove())}),1e3)}function onChatboxNeedResize(){"checked"===USER.configurations.r&&0===APP.resize&&(APP.resize=1,createChatboxResizable())}function onColorChanged(e){const t=$(e).val();t&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t)?changeUserColor(t):sendTimedSwal("Error","Bad color selected, you must select a real color",3e3,"OK")}function mutationComponents(){const e=document.querySelector(ATTRS.selectors.bar);new MutationObserver((function(e){for(let t of e)if("childList"===t.type||"characterData"===t.type){2===APP.mode&&pushUserSpecificData(DB.references.meUser,"status"),APP.statsHaveChanged=!0;break}})).observe(e,{characterData:!0,childList:!0,subtree:!0})}function listenerComponents(){$(ATTRS.selectors.skinUrl).on("change",(function(){skinValidation($(this).val())})),$(ATTRS.selectors.skinElem).on("click",(function(){skinValidation($(this).attr("src"))})),$(ATTRS.selectors.nickname).on("input",(function(){1===APP.mode&&$(ATTRS.selectors.nicknameProfile).text($(this).val()),USER.configurations.n=$(this).val()})).on("change",(function(){pushUserSpecificData(DB.references.meUser,"name")})),$(ATTRS.selectors.serverListItem).on("click",(function(){USER.server=$(this).find(ATTRS.selectors.serverName).text(),APP.resize=0,pushUserSpecificData(DB.references.meUser,"server")})),$(ATTRS.selectors.playButton).on("click",(()=>{" Lobbies"!==USER.server&&APP.statsHaveChanged&&pushUserStatisticsLocally(),1===APP.mode&&pushUserSpecificData(DB.references.meUser,"status"),onChatboxNeedResize()})),$(ATTRS.selectors.spectateButton).on("click",(()=>{pushUserSpecificData(DB.references.meUser,"spec"),onChatboxNeedResize()}))}function createComponents(){1===APP.mode&&(createSkinProfile(),createHUD()),createBoxes(),createSortable()}function createHUD(){displayTitle(),displaySocial();const e=$(ATTRS.selectors.level).text().trim();e&&0===$(ATTRS.selectors.discordBtn).length&&e.match(/\d+/)[0]>=5&&displaySwitch()}function displayTitle(){const e=ATTRS.titles[Math.floor(Math.random()*ATTRS.titles.length)];$(ATTRS.selectors.barHud).append(`\n        <titleMod>(Single mode)</titleMod>\n        <titleExtension>${e}</titleExtension>\n    `)}function displaySocial(){const e=$(ATTRS.selectors.socialContainer);if(!e)return;e.append('\n        <a data-v-3f8f826c href="https://discord.gg/wthDcUb6nY" target="_blank" rel="noopener" class="discord-link">\n            <i class="fas fa-heart"></i> Delta Discord\n        </a>\n    ','\n        <a data-v-3f8f826c href="https://discord.gg/cJByExsnub" target="_blank" rel="noopener" class="bug-link">\n            <i class="fas fa-bug"></i> Report a bug\n        </a>\n    '),e.mouseover((function(){e.fadeTo(250,1)})),e.mouseleave((function(){e.stop(!0,!0).fadeTo(250,.1)}))}function displaySwitch(){$(ATTRS.selectors.mainContainer).append(`\n        <div class="switchDual switchButton" tip='Delta Dual uses Rise, the original system created by Zimek.' onclick="window.location.href = '${ATTRS.libraries.deltaDual}'">\n            <p>Switch to dual</p>\n            <i style="margin-top: 4px" class="fas fa-exchange-alt"></i>\n        </div>\n    `)}function createSkinProfile(){const e=$(ATTRS.selectors.skinUrl),t=e?e.val():ATTRS.images.transparentSkin;$(ATTRS.selectors.playerData).before(`\n        <div class="profile-image">\n            <img class="skinProfile beautifulSkin" alt="" src="${t}">\n            <span class="nicknameProfile" style="color: ${USER.configurations.c}">${USER.configurations.n}</span>\n        </div>\n    `),skinValidation(t)}function skinValidation(e){e===ATTRS.images.imageAddVanis&&1===APP.mode?skinPutter(ATTRS.images.vanisSkin,!0):skinChecker(e)}function skinChecker(e){const t=new Image;t.onload=()=>{skinPutter(e,!0)},t.onerror=()=>{skinPutter(ATTRS.images.transparentSkin,!0)},t.src=e}function skinPutter(e,t){t&&pushUserSpecificData(DB.references.meUser,"skin"),1===APP.mode&&$(ATTRS.selectors.skinProfile).attr("src",e)}function showPage(e,t,s,n){"function"==typeof n&&n(),t&&t.forEach(((t,s)=>{s===e?($(t).removeClass("buttonTabActive"),$(t).addClass("buttonTabDisabled")):($(t).removeClass("buttonTabDisabled"),$(t).addClass("buttonTabActive"))})),s&&s.forEach(((t,s)=>{s===e?$(t).removeClass("hidden"):$(t).addClass("hidden")}))}function createBoxes(){createNewIcon(!0,"fas fa-users","Delta users","userIcon",drawUsersModal),createNewIcon(!0,"fas fa-user","Account","statIcon",drawStatisticsModal),createNewIcon(!0,"fas fa-trophy","Deltaboard","leaderboardIcon",drawLeaderboardModal),createNewIcon(!0,"fas fa-wrench","Tools and backup","toolIcon",drawToolsModal),createNewIcon(!0,"fas fa-images","Skins galery","skinsIcon",drawSkinsModal)}function createNewIcon(e,t,s,n,a){let o=$("<i>").addClass(t).attr({id:n,tip:s}).on("click",a||"");(e?$(ATTRS.selectors.mainContainer):$(ATTRS.selectors.menuContainer)).append(o)}function createNewBox(e,t,s,n,a){let o=a?'style="margin-left: -316px; width: 962px;"':"";$(ATTRS.selectors.playerContainer).append(`\n        <div data-v-73ccaaca="" data-v-5190ae12="" class="modal" ${o}>\n            <div data-v-73ccaaca="" class="overlay"></div>\n            <i data-v-73ccaaca="" class="fas fa-times-circle close-button" onclick="$(ATTRS.selectors.modalHud).remove()"></i>\n            <div data-v-73ccaaca="" class="wrapper"><div data-v-73ccaaca="" class="content fade-box">\n                <div data-v-c41b640a="" data-v-5190ae12="" data-v-15c13b66="" class="container">\n                    <div class="customBoxHeader">\n                        <h2 data-v-f0eb8534="" class="player-list-title customBoxTitle" ${n?`tip="${n}"`:""}>${t}</h2>\n                        ${s}\n                    </div>\n                    ${e}\n                </div>\n            </div>\n        </div>\n    `)}function drawUsersModal(){if($(ATTRS.selectors.userBox).length>0)return;const e=usersModal(LISTS.users);createNewBox(e.meHeader+e.profileHeader+e.onlineHeader+e.onlineList+e.offlineHeader+e.offlineList,"Players list",injectAnonymousSwitch(),injectConnectionsStats())}function usersModal(e){const t=e[USER.credentials.uid];let{listOnline:s,listOffline:n,userCount:a}=updateUserLists(e,t);return{meHeader:'<h3 class="titleSubBox">My profile</h3>',onlineHeader:`<h3 class="titleSubBox">${a.online} Online players</h3>`,offlineHeader:`<h3 class="titleSubBox">${a.offline} Offline players</h3>`,profileHeader:injectUser(t,getUserTime(t.st)),onlineList:s,offlineList:n,counts:a}}function updateUserLists(e,t){let s="",n="",a={online:0,offline:0,total:0};return Object.values(e).forEach((e=>{if(e===t)return;const o=getUserTime(e.st),i=injectUser(e,o);"Online"===o?(s+=i,a.online++):o&&(n+=i,a.offline++),a.total++})),{listOnline:s,listOffline:n,userCount:a}}function injectUser(e,t){const s=getUserAnonymous(e),n=processSkinInput(e.s),a=s?e.s:""===n.type?ATTRS.images.transparentSkin:n.url,o=""===n.type||s?"":`onclick="openSkin('${encodeURIComponent(JSON.stringify(n))}')"`;return(!e.n||e.n&&""===e.n.trim())&&(e.c="white",e.n="Unnamed"),`\n        <div class="listItem userItem ${t}" tip="${getUserTip(e,e.se,t)}">\n            <img class="userPhoto beautifulSkin" alt="" src="${a}" onerror="this.src = '${ATTRS.images.transparentSkin}'" ${o}>\n            <div class="userOnline" style="background-color: ${"Online"===t?ATTRS.colors.onlineColor:ATTRS.colors.offlineColor}"></div>\n            <div class="listTextItem userTextElem">\n                <div class="userNickLine">\n                    ${e.ba&&e.ba.u?`<img class="userBadgeDiv" alt="" src="${e.ba.u}" tip="${e.ba.t}">`:""}\n                    <p class="userNickname" style="color: ${e.c}">${e.n}\n                        <span class="userLevel">${0===e.l?"":" - Lvl "+e.l}</span>\n                    </p>\n                </div>\n                <p class="userOnlineText">${getUserServer(t,e.se)}\n                    <img class="userModeImg" alt="" src="${getUserMode(e.m)}" tip="${e.m+" mode"}">\n                </p>\n            </div>\n        </div>\n    `}function injectAnonymousSwitch(){return`\n        <div data-v-3ddebeb3="" class="p-switch pretty switchAnonymous" p-checkbox="">\n            <input type="checkbox" id="anonymousSwitch" ${USER.configurations.a}="" onchange="USER.configurations.a = switchManager(USER.configurations.a, 'a')" tip="Hides all your profile informations"> \n            <div class="state">\n                <label>Anonymous</label>\n            </div>\n        </div>\n    `}function injectConnectionsStats(){let e={total:Object.keys(LISTS.users).length,online:0,daily:0,last2days:0,last7days:0,last15days:0},t=(new Date).getTime(),s=18e5,n=1728e5,a=2592e5,o=6912e5,i=1296e6;for(let r in LISTS.users)if(LISTS.users.hasOwnProperty(r)){let c=LISTS.users[r].st;t-c<=s&&e.online++,t-c<=n&&e.daily++,t-c<=a&&e.last2days++,t-c<=o&&e.last7days++,t-c>i&&e.last15days++}return`Online users: ${e.online-1}\nDaily active users: ${e.daily-1}\nActive last 2 days: ${e.last2days-1}\nActive this week: ${e.last7days-1}`}function getUserTime(e){const t=(new Date).getTime()-e,s=Math.floor(t/6e4),n=Math.floor(s/1440),a=s-24*n*60,o=Math.floor(a/60);return t<18e5?"Online":function(e,t,s){if(!(e>=2))return e>0?`${e}d ago`:t>0?`${t}h ago`:s>0?`${s} min ago`:"Offline"}(n,o%24,a%60)}function getUserAnonymous(e){return 1===e.a&&(e.s=ATTRS.images.anonymousSkin,e.n="Anonymous #"+Math.floor(1e3*Math.random()),e.l=0,e.c=ATTRS.colors.white,e.m="Anonymous",e.ba=null,!0)}function getUserTip(e,t,s){return`Nickname : ${e.n}\n${0===e.l?"":"Level : "+e.l+"\n"}Last connection : ${"Online"===s?"Now":s}\nServer : ${t}\nColor used : ${e.c}\nMode: ${e.m?e.m:"Unknown"}`}function getUserMode(e){return"Single"===e?ATTRS.images.singleMode:"Dual"===e?ATTRS.images.dualMode:ATTRS.images.undefMode}function getUserServer(e,t){return"Anonymous"===t&&"Online"===e?"Online":t.includes("Spectator")&&"Online"===e?t:e+" on "+t.replace("Spectator on ","")}function drawStatisticsModal(){if($(ATTRS.selectors.toolBox).length>0)return;const e=statisticsModal(USER.statistics);createNewBox(e.list,"Profile & stats",e.logout)}function statisticsModal(e){return{list:generateStatisticsList(e),logout:generateLogoutButton()}}function generateLogoutButton(){return'\n        <div class="divLogout" onclick="firebaseSignOut()">\n            <p>Logout</p>\n            <i class="fas fa-sign-out-alt signOutButton"></i>\n        </div>\n    '}function generateStatisticsList(e){return`\n        <div class="stat-container">\n            ${generateProfileSection()}\n            ${generateStatisticsSection(e)}\n            <p class="resetAllStatistics" onclick="swalResetStatistics()">Reset all statistics <i class="fas fa-sync-alt resetAllStatisticsIcon"></i></p>\n        </div>\n    `}function generateProfileSection(){return`\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">Profil\n                <span data-v-22117250="" class="forceRight confidential silentUid">${USER.credentials.uid}</span>\n            </div>\n            <div data-v-2c5139e0="" class="options">\n                <p class="stat-p">\n                    ${0===$(ATTRS.selectors.discordName).length?"Disconnected":"Connected"}\n                    <span class="stat-span"> to Discord\n                    <i class="fab fa-discord"></i>\n                    </span>\n                </p>\n                <p class="stat-p confidential">\n                    <span class="stat-span" style="text-shadow: none!important">Account email :</span>\n                    ${USER.credentials.email}\n                </p>\n            </div>\n        </div>\n    `}function generateStatisticsSection(e){return`\n        <div data-v-2c5139e0="" class="section row">\n            <div data-v-2c5139e0="" class="header">Statistics   \n                <i class="fas fa-chart-bar headerIcon"></i>\n            </div>\n            <div data-v-2c5139e0="" class="options">\n                ${generateStatisticItem("Kills",e.sK)}\n                ${generateStatisticItem("Deaths",e.sG)}\n                ${generateStatisticItem("K/D",(e.sK/e.sG).toFixed(2),"The KDA represents the number of kills in relation to the number of deaths.")}\n                ${generateStatisticItem("Mass eaten",getFormatedMass(e.sM))}\n                ${generateStatisticItem("Mass eaten / game",getFormatedMass(e.sM/e.sG))}\n                ${generateStatisticItem("Time played",getElapsedTime(e.sT))}\n                ${generateStatisticItem("Time played / game",getElapsedTime(e.sT/e.sG))}\n            </div>\n        </div>\n    `}function generateStatisticItem(e,t,s=""){return`\n        <p class="stat-p" ${s?`tip="${s}"`:""}>\n            <span class="stat-span">${e}: </span>\n            ${t}\n        </p>\n    `}function getConvertedTimeToSeconds(e){return"string"!=typeof e?0:e.split(" ").reduce(((e,t)=>{const s=parseFloat(t);return t.endsWith("s")?e+s:t.endsWith("min")?e+60*s:t.endsWith("h")?e+3600*s:e}),0)}function getConvertedStringToNumber(e){if("string"!=typeof e)return 0;const t=parseFloat(e);return Number.isNaN(t)?0:e.endsWith("k")?1e3*t:e.endsWith("M")?1e6*t:t}function getElapsedTime(e,t=!0,s=!0,n=!0,a=!0,o=!0,i=!0){let r=0,c=0,l=0,d=0,u=0;t&&(r=Math.floor(e/31536e3),e%=31536e3),s&&(c=Math.floor(e/2629800),e%=2629800),n&&(l=Math.floor(e/86400),e%=86400),a&&(d=Math.floor(e/3600),e%=3600),o&&(u=Math.floor(e/60),e%=60),i&&(e=Math.round(e));let f="";return t&&r>0&&(f+=`${r}y `),s&&c>0&&(f+=`${c}m `),n&&l>0&&(f+=`${l}d `),a&&d>0&&(f+=`${d}h `),o&&u>0&&(f+=`${u}min `),i&&e>0&&(f+=`${e}s`),f.trim()}function getFormatedMass(e){return e>=1e15?formatNumber(e,1e15,"Qd"):e>=1e12?formatNumber(e,1e12,"Td"):e>=1e9?formatNumber(e,1e9,"Md"):e>=1e6?formatNumber(e,1e6,"M"):e>=1e3?formatNumber(e,1e3,"k"):Math.round(e).toString()}function formatNumber(e,t,s){let n=e/t,a=e%t,o=Math.round(a/(t/10));return o>0?`${Math.round(n)},${o}${s} `:`${Math.round(n)}${s}`}function swalResetStatistics(){Swal.fire({title:"Confirm reset ?",text:"Do you want to permanently delete your statistics ?",showCancelButton:!0,confirmButtonText:"Yes",cancelButton:"No"}).then((e=>{!0===e.value&&confirmResetStatistics()}))}function confirmResetStatistics(){DB.references.meStat.remove().then((()=>{sendTimedSwal("Deleted","Your statistics have been successfully deleted, the page will reload...",1500,!1),setTimeout((()=>window.location.reload()),1500)})).catch((e=>{sendTimedSwal("Error","Deleting your statistics failed: "+e.message,1e4,"OK")}))}function drawLeaderboardModal(){$(ATTRS.selectors.toolBox).length>0||(void 0===LISTS.leaderboard?DB.references.statistics.once("value",(e=>{e.exists()&&(LISTS.leaderboard=e.val(),addLeaderboardModal())})):addLeaderboardModal())}function addLeaderboardModal(){createNewBox(`\n        <div class="buttonTabContainer">${[{id:0,text:"K/D",filter:"kda",class:"leaderbordKdaButton"},{id:1,text:"Kills",filter:"killTotal",class:"leaderbordKillsButton"},{id:2,text:"Deaths",filter:"gameTotal",class:"leaderbordGamesButton"},{id:3,text:"Mass total",filter:"massTotal",class:"leaderbordMassTotalButton"},{id:4,text:"Mass avg",filter:"massAvg",class:"leaderbordMassAvgButton"},{id:5,text:"Time total",filter:"timeTotal",class:"leaderbordTimeButton"}].map((e=>`\n        <div class="${e.class} buttonTab ${0===e.id?"buttonTabDisabled":"buttonTabActive"}" onclick="handleButtonClick(${e.id}, '${e.filter}')">\n            <p class="buttonTabText">${e.text}</p>\n        </div>\n    `)).join("")}</div>\n        <div class="leaderboardList"></div>\n    `,"Deltaboard top 100",""),injectCustomLeaderboard("kda")}function handleButtonClick(e,t){showPage(e,[ATTRS.selectors.leaderbordKdaButton,ATTRS.selectors.leaderbordKillsButton,ATTRS.selectors.leaderbordGamesButton,ATTRS.selectors.leaderbordMassTotalButton,ATTRS.selectors.leaderbordMassAvgButton,ATTRS.selectors.leaderbordTimeButton],null),injectCustomLeaderboard(t)}function injectCustomLeaderboard(e){const t={kda:(e,t)=>(t.sG?t.sK/t.sG:0)-(e.sG?e.sK/e.sG:0),killTotal:(e,t)=>t.sK-e.sK,gameTotal:(e,t)=>t.sG-e.sG,massTotal:(e,t)=>t.sM-e.sM,timeTotal:(e,t)=>t.sT-e.sT,massAvg:(e,t)=>(t.sG?t.sM/t.sG:0)-(e.sG?e.sM/e.sG:0)},s=Object.values(LISTS.leaderboard).sort(t[e]||t.kda).slice(0,100).map(((t,s)=>injectLeaderboard(t,t.uid,s+1,e))).join("");$(ATTRS.selectors.leaderboardList).html(s)}function injectLeaderboard(e,t,s,n){const a=LISTS.users[e.u];if(!a)return"";let o;switch(n){case"killTotal":o=e.sK;break;case"gameTotal":o=e.sG;break;case"kda":default:o=(e.sK/e.sG).toFixed(2)+" K/D";break;case"massTotal":o=getFormatedMass(e.sM);break;case"massAvg":o=getFormatedMass(e.sM/e.sG);break;case"timeTotal":o=getElapsedTime(e.sT,!1,!1,!1,!0,!0,!1)}return""===a.n.trim()&&(a.c="white",a.n="Unnamed"),`\n        <div class="leaderboardItem ${a.u===USER.credentials.uid?"leaderboardItemMe":""}">\n            <p class="leaderboardPosition">${s}. </p>\n            ${a.ba&&a.ba.u?`<img class="leaderboardBadgeDiv" alt="" src="${a.ba.u}" tip="${a.ba.t}">`:""}\n            <p class="leaderboardNickname ${a.u===USER.credentials.uid?"leaderboardNicknameMe":""}" style="color: ${a.c}">${a.n}</p>\n            <p class="leaderboardStatisticValue ${a.u===USER.credentials.uid?"leaderboardStatisticValueMe":""}">${o}</p>\n        </div>\n    `}async function drawToolsModal(){if(!($(ATTRS.selectors.toolBox).length>0)){if(void 0===LISTS.badges||void 0===LISTS.hats||void 0===LISTS.configurations)try{const e=await DB.references.badges.once("value");e.exists()&&(LISTS.badges=e.val());const t=await DB.references.hats.once("value");t.exists()&&(LISTS.hats=t.val());const s=await DB.references.meConfig.once("value");s.exists()&&(LISTS.configurations=s.val())}catch(e){}addToolsModal()}}function addToolsModal(){createNewBox(toolsModal(fetchItem(LISTS.configurations,injectConfiguration),LISTS.configurations?Object.keys(LISTS.configurations).length:0,fetchItem(LISTS.badges,injectBadge),fetchItem(LISTS.hats,injectHat)),"Delta settings","")}function toolsModal(e,t,s,n){return`\n        <div class="tool-container">\n            <div class="tool-section">\n                <div class="buttonTabContainer">\n                    <div class="buttonTab buttonTabDisabled toolsNavPerksTab" onclick="showPage(0, [ATTRS.selectors.toolsPageButtonPerks, ATTRS.selectors.toolsPageButtonSettings, ATTRS.selectors.toolsPageButtonConfigurations], [ATTRS.selectors.toolsPagePerks, ATTRS.selectors.toolsPageSettings, ATTRS.selectors.toolsPageConfigurations])">\n                        <p class="buttonTabText">Perks</p>\n                    </div>\n                    <div class="buttonTab buttonTabActive toolsNavSettingsTab" onclick="showPage(1, [ATTRS.selectors.toolsPageButtonPerks, ATTRS.selectors.toolsPageButtonSettings, ATTRS.selectors.toolsPageButtonConfigurations], [ATTRS.selectors.toolsPagePerks, ATTRS.selectors.toolsPageSettings, ATTRS.selectors.toolsPageConfigurations])">\n                        <p class="buttonTabText">Settings</p>\n                    </div>\n                    <div class="buttonTab buttonTabActive toolsNavConfigurationsTab" onclick="showPage(2, [ATTRS.selectors.toolsPageButtonPerks, ATTRS.selectors.toolsPageButtonSettings, ATTRS.selectors.toolsPageButtonConfigurations], [ATTRS.selectors.toolsPagePerks, ATTRS.selectors.toolsPageSettings, ATTRS.selectors.toolsPageConfigurations])">\n                        <p class="buttonTabText">Backups</p>\n                    </div>\n                </div>\n                <div class="toolsPagePerks">\n                    <div data-v-2c5139e0="" class="section row">\n                        <div data-v-2c5139e0="" class="header">Colored name</div>\n                        <div data-v-2c5139e0="" class="options">\n                            <div class="colorPickerContainer">\n                                <input type="text" id="colorPickerInput" value="${USER.configurations.c}" placeholder="${ATTRS.colors.defaultColor}" onchange="onColorChanged(this)">\n                                <div class="colorPickerGui">\n                                    <input type="color" id="colorPickerSelector" value="${USER.configurations.c}" onchange="onColorChanged(this)">\n                                </div>\n                            </div>\n                        <div data-v-22117250="" class="silent silentCustomTop">After change, re-join the server</div>\n                        </div> \n                    </div>\n                    <div data-v-2c5139e0="" class="section row">\n                    <div data-v-2c5139e0="" class="header">Badge</div>\n                        <div data-v-2c5139e0="" class="options">\n                            <p class="badgeText">Click to toggle. <b>Combined</b> with the Vanis badge</p>\n                            <div class="badgeListPerks">\n                                ${s}\n                            </div>\n                        </div> \n                    </div>\n                    <div data-v-2c5139e0="" class="section row">\n                        <div data-v-2c5139e0="" class="header">Hats\n                            <div data-v-3ddebeb3="" class="p-switch pretty forceRight" p-checkbox="" tip="To activate custom hats, not perks hats">\n                                <input type="checkbox" id="hatActive"> \n                                <div class="state">\n                                    <label>Hat active</label>\n                                </div>\n                            </div>\n                        </div>\n                        <div data-v-2c5139e0="" class="options">\n                            <p class="badgeText">Click to toggle. You can't adjust the opacity now, soon yes</p>\n                            <div class="hatListPerks">\n                                ${n}\n                            </div>\n                        </div> \n                    </div>\n                </div>\n                <div class="toolsPageSettings hidden">\n                    <div data-v-2c5139e0="" class="section row">\n                        <div data-v-2c5139e0="" class="header">Configuration</i>\n                        </div>\n                        <div data-v-2c5139e0="" class="options">\n                            <div data-v-3ddebeb3="" class="p-switch pretty" p-checkbox="">\n                                <input type="checkbox" id="blurredHUD" ${USER.configurations.b}="" onchange="USER.configurations.b = switchManager(USER.configurations.b, 'b')" tip=""> \n                                <div class="state">\n                                    <label>Blurred in-game HUD</label>\n                                </div>\n                            </div>\n                            <div data-v-3ddebeb3="" class="p-switch pretty" p-checkbox="">\n                                <input type="checkbox" id="resizableChatbox" ${USER.configurations.r}="" onchange="USER.configurations.r = switchManager(USER.configurations.r, 'r')" tip=""> \n                                <div class="state">\n                                    <label>Resizable chatbox</label>\n                                </div>\n                            </div>\n                            <div data-v-3ddebeb3="" class="p-switch pretty" p-checkbox="">\n                                <input type="checkbox" id="autoSynchronization" ${USER.configurations.as}="" onchange="USER.configurations.as = switchManager(USER.configurations.as, 'as')" tip="By saving your locales configurations to the database, you will be able to access them anywhere"> \n                                <div class="state">\n                                    <label>Auto save my configurations</label>\n                                </div>\n                            </div>\n                            <div data-v-3ddebeb3="" class="p-switch pretty" p-checkbox="">\n                                <input type="checkbox" id="autoSynchronization" ${USER.configurations.cc}="" onchange="USER.configurations.cc = switchManager(USER.configurations.cc, 'cc')" tip="Shows color in player nickname"> \n                                <div class="state">\n                                    <label>Show nickname color</label>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="toolsPageConfigurations hidden">\n                    <div data-v-2c5139e0="" class="section row">\n                        <div data-v-2c5139e0="" class="header">${t} backups saved<i class="fas fa-save headerIcon"></i>\n                        </div>\n                        <div data-v-2c5139e0="" class="options">\n                            ${e}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `}async function drawSkinsModal(){$(ATTRS.selectors.skinBox).length>0||(createNewBox(injectSkinPages(),"Public skins","","",!0),await loadAllSkins())}function injectSkinPages(){return'\n        <div class="buttonTabContainer">\n            <div class="buttonTab buttonTabDisabled skinsNavAllButton" onclick="showPage(0, [ATTRS.selectors.skinsNavAllButton, ATTRS.selectors.skinsNavMeButton, ATTRS.selectors.skinsNavFavButton], [ATTRS.selectors.skinsNavAllPage, ATTRS.selectors.skinsNavMePage, ATTRS.selectors.skinsNavFavPage], loadAllSkins)">\n                <p class="buttonTabText">Public skins</p>\n            </div>\n            <div class="buttonTab buttonTabActive skinsNavMeButton" onclick="showPage(1, [ATTRS.selectors.skinsNavAllButton, ATTRS.selectors.skinsNavMeButton, ATTRS.selectors.skinsNavFavButton], [ATTRS.selectors.skinsNavAllPage, ATTRS.selectors.skinsNavMePage, ATTRS.selectors.skinsNavFavPage], loadMySkins)">\n                <p class="buttonTabText">Your skins</p>\n            </div>\n            <div class="buttonTab buttonTabActive skinsNavFavButton" onclick="showPage(2, [ATTRS.selectors.skinsNavAllButton, ATTRS.selectors.skinsNavMeButton, ATTRS.selectors.skinsNavFavButton], [ATTRS.selectors.skinsNavAllPage, ATTRS.selectors.skinsNavMePage, ATTRS.selectors.skinsNavFavPage], loadFavSkins)">\n                <p class="buttonTabText">Favorite skins</p>\n            </div>\n        </div>\n        <div class="skinsNavAllPage skinsLibraryList"></div>\n        <div class="skinsNavMePage skinsLibraryList"></div>\n        <div class="skinsNavFavPage skinsLibraryList"></div>\n    '}function renderSkinsFromList(e,t){Array.isArray(e)&&0!==e.length&&$(t).find("img").length!==e.length&&e.forEach((e=>{itemSkinModal(e,t)}))}function itemSkinModal(e,t){if(!e.id)return;const s={type:"vanis",id:e.id,url:"https://skins.vanis.io/s/"+e.id};$(t).append(`\n        <img class="skinItemLibrary beautifulSkin" src="${s.url}" alt="" tip="${s.url}" onclick="openSkin('${encodeURIComponent(JSON.stringify(s))}')">\n    `)}async function fetchSkins(e,t){try{const t=await fetch(e,{method:"GET",headers:{Authorization:APP.skinAuth,Origin:"https://skins.vanis.io/"}});return t.ok?await t.json():(sendTimedSwal("Error",`Server responded with ${t.status}: ${t.statusText}`,1e4,"OK"),null)}catch(e){return sendTimedSwal(t,e.toString(),3e3,!1),null}}async function loadSkins(e,t,s,n,a){if($(ATTRS.selectors.boxTitle).text(e),t.length>0)return void renderSkinsFromList(e,t,a);const o=await fetchSkins(s,n);o&&(t.push(...o),o.forEach((e=>itemSkinModal(e,a))))}async function loadMySkins(){await loadSkins("My skins",SKINS.me,"https://cors-proxy.fringe.zone/https://skins.vanis.io/api/me/skins","Fetching my skins error",ATTRS.selectors.skinsNavMePage)}async function loadFavSkins(){await loadSkins("Favorite skins",SKINS.fav,"https://cors-proxy.fringe.zone/https://skins.vanis.io/api/me/favorites","Fetching my favorites skins error",ATTRS.selectors.skinsNavFavPage)}async function loadAllSkins(){if($(ATTRS.selectors.boxTitle).text("Public skins"),SKINS.all.length>0)renderSkinsFromList(SKINS.all,ATTRS.selectors.skinsNavAllPage);else for(let e=0;e<=50;e++){const t=await fetchSkins(`https://cors-proxy.fringe.zone/https://skins.vanis.io/api/public-skins?page=${e}`,`Page ${e} error`);t&&(SKINS.all.push(...t),t.forEach((e=>itemSkinModal(e,ATTRS.selectors.skinsNavAllPage))))}}function openSkin(e){const t=JSONSafeParser(decodeURIComponent(e));$(ATTRS.selectors.overlay).append(`\n        <div class="overlaySkin">\n            <i class="fas fa-times closeSkinItemModal" onclick="$(ATTRS.selectors.overlaySkin).remove()"></i>\n            <div class="absoluteCenter">\n                <img class="skinItemModal beautifulSkin" src="${t.url}" alt="" onerror="this.src = '${ATTRS.images.transparentSkin}'">\n                <div class="skinItemActions">\n                    <div class="skinItemNav skinItemNavId">\n                        <p class="skinItemURL">Skin ID: ${t.id}</p>\n                    </div>\n                    <div class="skinItemNav skinItemNavBtn" onclick="yoinkSkin('${t.url}')">\n                        <div class="skinItemYoink">\n                            <i class="fas fa-link"></i>\n                            <p class="skinItemTextButton">Yoink</p>\n                        </div>\n                    </div>\n                    <div class="skinItemNav skinItemNavBtn" onclick="copySkin('${t.url}')">\n                        <div class="skinItemCopy">\n                            <i class="fas fa-copy"></i>\n                            <p class="skinItemTextButton">Copy</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `)}function processSkinInput(e){if(!e)return{type:"",url:"",id:""};if(e.includes("https://skins.vanis.io/s/")){const t=e.split("/");return{type:"vanis",url:e,id:t[t.length-1]}}if(e.includes("https://i.ibb.co/")){const t=e.split("/");return{type:"imgbb",url:e,id:t[t.length-2]}}return 6===e.length?{type:"vanis",url:"https://skins.vanis.io/s/"+e,id:e}:{type:"",url:"",id:""}}function fetchSkinToClient(e){return e?e.contains("https://i.ibb.co/")?e:6===e.length()?"https://skins.vanis.io/s/"+e:null:null}function copySkin(e){navigator.clipboard.writeText(e).then((()=>{sendTimedSwal("Skin copied","The skin has been copied to the clipboard",1500,!1)})).catch((e=>{sendTimedSwal("Error","An error occurred while copying the skin: "+e.message,1e4,"OK")}))}function yoinkSkin(e){let t=JSONSafeParser(getLocalStorageItem("skins",'["https://skins.vanis.io/s/Qkfih2","https://skins.vanis.io/s/Qkfih2"]'));Object.keys(t).length>0?(t.push(e),localStorage.setItem("skins",JSON.stringify(t)),sendTimedSwal("Skin yoinked","The skin has been yoinked, need to refresh the page to save",1500,!1)):sendTimedSwal("Error","An error occurred while yoinking the skin",1e4,"OK")}function injectConfiguration(e,t){const s=injectSkin(e.skins);return`\n        <div class="listItem configItem" id="${t}">\n            <div class="configContent">\n                <div class="configInformations">\n                    <p class="configName">${e.m}</p>\n                    <p class="configDate">${e.d}</p>\n                </div>\n                <div class="configContentList">\n                    ${APP.machineId===e.m?'<p class="configActual configCard">Actual backup</p>':""}\n                    ${e.n&&""!==e.n?`<p class="configNickname configCard" style="color: ${e.c?e.c:"#ffffff"}">Name: ${e.n}</p>`:""}\n                    ${e.t?`<p class="configTeamTag configCard">Tag: ${e.t}</p>`:""}\n                    <p class="configHotkeys configCard">${function(e){if(!e)return 0;const t=JSONSafeParser(e);return 0===Object.keys(t).length?0:Object.keys(t).filter((e=>""!==t[e])).length}(e.hotkeys)} hotkeys</p>\n                    <p class="configSkins configCard">${s.count} skins</p>\n                </div>\n                ${s.list}\n            </div>\n            <div class="configAction">\n                <div class="configGet configActionButton" onclick="updateConfiguration('${t}')">\n                    <p class="configActionButtonText">Apply</p>\n                </div>\n                <div class="configDelete configActionButton" onclick="deleteConfiguration('${t}')">\n                    <p class="configActionButtonText">Delete</p>\n                </div>\n            </div>\n        </div>\n    `}function injectSkin(e){if(!e)return{list:"",count:0};const t=JSONSafeParser(e);if(Object.keys(t).length>0){return{list:`<div class="listSkins">${t.map((e=>{const t=processSkinInput(e);return""===t.type?"":`<img src="${t.url}" alt="" class="configSkinItem beautifulSkin" tip="${t.url}" onerror="this.src = '${ATTRS.images.transparentSkin}'" onclick="openSkin('${encodeURIComponent(JSON.stringify(t))}')">`})).join("")}</div>`,count:Object.keys(t).length}}return{list:"",count:0}}function injectBadge(e){return injectPerk(e,"ba","badge","pushUserBadge")}function injectHat(e){return injectPerk(e,"h","hat","pushUserHat")}function injectPerk(e,t,s,n){const a=LISTS.users[USER.credentials.uid][t];let o=!1;return APP.selected[s]=!(!a||a.i!==e.i)&&a.i,(e.o&&e.o[USER.credentials.uid]||e.e&&("kill"===e.e.t&&e.e.v<=USER.statistics.sK||"time"===e.e.t&&e.e.v<=USER.statistics.sT))&&(o=!0),`\n        <img class="${s}Item ${s}${e.i} ${o?`${s}Owner`:`${s}NotOwner`} ${APP.selected[s]?`${s}Selected`:`${s}NotSelected`}" src="${e.u}" tip="${e.t}" ${o?`onclick="${n}('${encodeURIComponent(JSON.stringify(e))}')"`:""} alt=""/>\n    `}function deleteSuccess(e){const t=$("#"+e);DB.references.meConfig.child(e).remove().then((()=>{t.length&&(t.remove(),sendTimedSwal("Deleted","The configuration have been successfully deleted",1500,!1))})).catch((e=>{sendTimedSwal("Error","Deleting your configuration failed: "+e.message,1e4,"OK")}))}function deleteConfiguration(e){Swal.fire({title:"Confirm deletion ?",text:"Do you want to remove this configuration definitely ?",showCancelButton:!0,confirmButtonText:"Yes",cancelButton:"No"}).then((t=>{!0===t.value&&deleteSuccess(e)}))}function updateSuccess(e){const t=LISTS.configurations[e];["skins","hotkeys","b","c","c","n","t"].forEach((e=>{t[e]&&""!==t[e]&&"{}"!==t[e]&&localStorage.setItem(e,t[e])})),localStorage.removeItem("MachineId"),localStorage.setItem("MachineId",getMachineId()),sendTimedSwal("Success","The configuration has been changed, the page will reload...",1500,!1),setTimeout((()=>window.location.reload()),1500)}function callSwal(e){Swal.fire({title:"Confirm update ?",text:"Do you want to load this configuration into the game ?",showCancelButton:!0,confirmButtonText:"Yes",cancelButton:"No"}).then((t=>{!0===t.value&&updateSuccess(e)}))}function updateConfiguration(e){callSwal(e)}function updateSkinsLocally(){let e="[";$(ATTRS.selectors.skinElem).each((function(){const t=$(this).attr("src");t&&"/img/skin-add.png"!==t&&("["!==e&&(e+=","),e+='"'+t+'"')})),e+="]",localStorage.setItem("skins",e)}function createSortable(){const e=document.getElementById("skins");new Sortable(e,{handle:".skin-container",onEnd:function(){updateSkinsLocally()}})}function createChatboxResizable(){const e=$(ATTRS.selectors.chatboxContainer);e.on("mousedown",(function(t){const s=t.clientX,n=t.clientY,a=parseInt(e.css("width"),10),o=parseInt(e.css("height"),10);function i(t){const i=a+t.clientX-s,r=o+n-t.clientY;e.css("width",`${i}px`),e.css("height",`${r}px`);const c=$(ATTRS.selectors.playerStalkContainer);2!==APP.mode||!c||c.css("bottom",`${r+40}px`)}$(document).on("mousemove",i),$(document).on("mouseup",(function e(){$(document).off("mousemove",i),$(document).off("mouseup",e)}))}))}function changeUserColor(e){if(USER.configurations.c=e,localStorage.setItem("c",e),$(ATTRS.selectors.nicknameProfile).css("color",e),$(ATTRS.selectors.colorPickerInput).val(e),$(ATTRS.selectors.colorPickerSelector).val(e),2===APP.mode){const t=$(ATTRS.selectors.nicknameProfile).text()===$(ATTRS.selectors.nicknameProfile2).text();$(ATTRS.selectors.nicknameProfile2).css("color",t?e:"white")}pushUserSpecificData(DB.references.meUser,"color")}function changeCellColor(e){const t=CanvasRenderingContext2D.prototype.fillText;CanvasRenderingContext2D.prototype.fillText=function(s,n,a){APP.blacklist.includes(s)||(s===USER.configurations.n?this.fillStyle=USER.configurations.c:s===e&&LISTS.colors[e]&&LISTS.colors[e].c?this.fillStyle=LISTS.colors[e].c:LISTS.colors[s]&&LISTS.colors[s].c&&(this.fillStyle=LISTS.colors[s].c)),t.apply(this,arguments)}}function pushUserData(){pushUserInfos(),pushUserConfigurations()}function fetchUserData(){pushUserData(),fetchUsersOnce((()=>{fetchUserChanged(),fetchUserStatisticsDb()}))}function JSONSafeParser(e){try{return JSON.parse(e)}catch(e){return sendTimedSwal("Error","JSON parsing error: "+e.message,1e4,"OK"),{}}}function getLocalStorageItem(e,t){return localStorage.getItem(e)||t}function getLocalValues(e){USER.credentials=e,USER.server="Lobby",USER.mode=1===APP.mode?"Single":"Dual",switchManagerSpecificChange(USER.configurations.b,"b")}function getDatabase(){DB.database=firebase.database(),DB.references=getAllReferences()}function pushDatabase(e,t){window.firebase&&e.update(t)}function removeDatabase(e){window.firebase&&e.remove(data)}function switchManager(e,t){return switchManagerSpecificChange(e="checked"===e?"unchecked":"checked",t),localStorage.setItem(t,e),e}function switchManagerSpecificChange(e,t){if("a"===t)pushDatabase(DB.references.meUser,{a:"checked"===e?1:0});else if("b"===t){let t="checked"===e?"blur(7px)":"";$(ATTRS.selectors.leaderboard).css("backdrop-filter",t),$(ATTRS.selectors.chatboxContainer).css("backdrop-filter",t),$(ATTRS.selectors.minimapContainer).css("backdrop-filter",t),$(ATTRS.selectors.messageToast).css("backdrop-filter",t),2===APP.mode&&$(ATTRS.selectors.playerStalkContainer).css("backdrop-filter",t)}}function sendTimedSwal(e,t,s,n){Swal.fire({title:e,text:t,timer:s,showConfirmButton:n})}function displayError(e){const t=$(ATTRS.selectors.bodyHud);t.empty(),t.css("background-color","black");const s=$("<error>").text(e).css({"font-size":"28px",color:"white","text-align":"left",margin:"50px",position:"absolute"});throw t.append(s),new Error(e)}function getMachineId(){let e=localStorage.getItem("MachineId");return e||(e=crypto.randomUUID(),localStorage.setItem("MachineId",e)),e}function getAllConfigurations(){return{m:APP.machineId,d:(new Date).toLocaleDateString("fr-FR"),skins:getLocalStorageItem("skins","{}"),hotkeys:getLocalStorageItem("hotkeys","{}"),c:getLocalStorageItem("c",ATTRS.colors.defaultColor),n:getLocalStorageItem("nickname",""),a:getLocalStorageItem("a","unchecked"),as:getLocalStorageItem("as","checked"),b:getLocalStorageItem("b","checked"),r:getLocalStorageItem("r","unchecked"),cc:getLocalStorageItem("cc","checked")}}function getAllReferences(){const e=USER.credentials.uid,t=DB.database;return{user:t.ref("U"),statistics:t.ref("S"),badges:t.ref("B"),dashboardTotal:t.ref("St/t"),hats:t.ref("H"),meUser:t.ref(`U/${e}`),meUserBadge:t.ref(`U/${e}/ba`),meUserHat:t.ref(`U/${e}/h`),meStat:t.ref(`S/${e}`),meConfig:t.ref(`Ba/${e}`),meConfigItem:t.ref(`Ba/${e}/${APP.machineId}`)}}function getAllLibrary(){return{firebaseApp:"https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js",firebaseDatabase:"https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js",firebaseAuth:"https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js",jquery:"https://code.jquery.com/jquery-3.7.1.min.js",css:"https://raw.githubusercontent.com/Fohz67/Delta-Client-Content/main/styles.css",deltaDual:"https://vanis.io/delta-dual",sortable:"https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"}}function getAllSelectors(){return{head:"head",link:"link[rel*='icon']",overlay:"#overlay",level:".xp-data>div:first-child",teamTag:"#teamtag",xp:".xp-data>div:last-child",chatboxContainer:1===APP.mode?".chatbox":"#chatbox",messageList:1===APP.mode?".message-list":"#message-list",messageName:1===APP.mode?".message-from-name":".message-from",messageToast:".message-row.toast",colorBox:".perks",colorPickerGui:".colorPickerGui",colorPickerInput:"#colorPickerInput",colorPickerSelector:"#colorPickerSelector",colorSwitchCell:"#colorSwitchNickCell",colorSwitchChatbox:"#colorSwitchNickChatbox",colorSwitchLeaderboard:"#colorSwitchNickLeaderboard",colorSwitchNickCell:"#colorSwitchNickCell",discordBtn:".discord",discordName:1===APP.mode?".account-name":"#account-name",discordPhoto:".avatar",ad:'div[data-v-5190ae12][style*="height: 286px;"]',bar:1===APP.mode?"#overlay>.container:nth-child(3)":".bar>.statBar",barHud:".bar",bodyHud:"body",cmp:"#cmpbox",cmpButton:".cmpboxbtn",mainContainer:"#main-container",menuContainer:"#menu-container",modalHud:".modal",socialContainer:".social-container",leaderboard:"#leaderboard",leaderboardText:1===APP.mode?".leaderboard-text":".leaderboard-label[data-v-8a0c31c6]>:last-child ",nickname:"#nickname",nicknameProfile:1===APP.mode?".nicknameProfile":".sdn1",nicknameProfile2:".sdn2",playButton:"#play-button",playerContainer:"#player-container",playerData:"#player-container #player-data",playerListTitle:".player-list-title",playerStalkContainer:".playerStalkContainer",spectateButton:"#spec-button",serverList:".server-list",serverListItem:".server-list-item",serverName:".server-name",skinContainer:".skin-container",skinElem:".skin",skinProfile:".skinProfile",skinUrl:"#skinurl",skinsId:"#skins",overlaySkin:".overlaySkin",skinAdd:".add-skin",skinsNavAllButton:".skinsNavAllButton",skinsNavMeButton:".skinsNavMeButton",skinsNavFavButton:".skinsNavFavButton",skinsNavAllPage:".skinsNavAllPage",skinsNavMePage:".skinsNavMePage",skinsNavFavPage:".skinsNavFavPage",statKills:"#overlay>.container>.fade-box.scroll>div>div:nth-child(3)",statScore:"#overlay>.container>.fade-box.scroll>div>div:nth-child(2)",statTime:"#overlay>.container>.fade-box.scroll>div>div:nth-child(1)",anonymousStatus:".anonymousStatus",anonymousSwitch:".anonymousSwitch",minimapContainer:1===APP.mode?".minimap-wrapper>.container":".container[data-v-4c95bd45]",statBox:".statBox",toolBox:".toolBox",userBox:".userBox",skinBox:".skinBox",leaderboardBox:".leaderboardBox",userNickLine:".userNickLine",boxTitle:".customBoxTitle",emailInput:"#email-input",loadingDelta:".loadingDelta",passwordInput:"#password-input",submitButton:"#submit-account",submitText:"#submit-text",toolsPagePerks:".toolsPagePerks",toolsPageButtonPerks:".toolsNavPerksTab",toolsPageSettings:".toolsPageSettings",toolsPageButtonSettings:".toolsNavSettingsTab",toolsPageConfigurations:".toolsPageConfigurations",toolsPageButtonConfigurations:".toolsNavConfigurationsTab",leaderboardList:".leaderboardList",leaderbordKdaButton:".leaderbordKdaButton",leaderbordKillsButton:".leaderbordKillsButton",leaderbordGamesButton:".leaderbordGamesButton",leaderbordMassTotalButton:".leaderbordMassTotalButton",leaderbordMassAvgButton:".leaderbordMassAvgButton",leaderbordTimeButton:".leaderbordTimeButton"}}function getAllImages(){return{anonymousSkin:"https://i.ibb.co/NtMpMBJ/anonymous.png",transparentSkin:"https://i.ibb.co/g9Sj8gK/transparent-skin.png",vanisSkin:"https://skins.vanis.io/s/vanis1",dualMode:"https://i.ibb.co/gSkk94N/dual.png",singleMode:"https://i.ibb.co/Lr248FQ/single.png",undefMode:"https://i.ibb.co/g9Sj8gK/undef.png",deltaLogo:"https://i.ibb.co/kh36nB5/delta.png",imageAddVanis:"/img/skin-add.png"}}function getAllColors(){return{whiteRGB:"rgb(255, 255, 255)",defaultColor:"#ffffff",onlineColor:"#32e34a",offlineColor:"#e33247"}}function getAllErrors(){return{title:"Delta error:",content:". Please send a message in #support on the official Delta Discord server : https://discord.gg/wthDcUb6nY/"}}function getAllTitle(){return["+490 users on Delta","Alis.io","Vanis.io","Vanish.io","Raf x Duru x Fohz","Delta.io","Delta above all","Delta on top","Delta will carry you","Delta best ext ?","Alis.io legends","Want a badge? DM Fohz","Luka will recruit Fohz?","Join discord now","Fohz the tricker","BBN the SK","Exe the legend","Duru is cuter than all","Deadly World the solo","Yuu the hat coder","Splat the YouTuber","Zimek the precursor","Angel the mad","Grouk the legend","Useful the splitrunner","Frenchies on top","Eva, don't hate Fohz","DM Luka to recruit Fohz!","Luka need Fohz ?","Pi the legend","Who's Miracle..?"]}async function drawStyle(){try{const e=`${ATTRS.libraries.css}?=${(new Date).getTime()}`,t=await fetch(e);t.ok||displayError(ATTRS.errors.title+"Css fetcher failed"+ATTRS.errors.content);const s=await t.text();$("<style>").text(s).appendTo("head"),$(ATTRS.selectors.loadingDelta).remove(),localStorage.setItem("promiseError","0"),checkAnnouncement()}catch(e){displayError(ATTRS.errors.title+"Css injector system failed"+ATTRS.errors.content)}}function checkAnnouncement(){parseInt(localStorage.getItem("announcement")||0)<53&&setTimeout((()=>{sendTimedSwal("Massive update 5.3","Join discord now to see the update : https://discord.gg/wthDcUb6nY",1e4,"OK"),localStorage.setItem("announcement","53")}),1500)}"submitLoading"===document.readyState?document.addEventListener("DOMContentLoaded",onDocumentReady):onDocumentReady(),window.getColorsDual=()=>LISTS.colors,window.addEventListener("userPidChanged",(()=>{USER.pid=window.updatePid(),pushUserSpecificData(DB.references.meUser,"pid")}));